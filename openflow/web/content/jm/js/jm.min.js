var $jm = { debug: !0, _hash: {}, cache: { set: function (a, b) { return $jm._hash[a] = b, b }, get: function (a) { return $jm._hash[a] }, count: function () { var a = 0; for (var b in $jm._hash) a++; return a }, remove: function (a) { delete $jm._hash[a] }, contains: function (a) { return !$jm.isNull($jm._hash[a]) } }, browser: { userAgent: navigator.userAgent, _init: function () { /Mobile/i.test(this.userAgent) && (this.mobile = !0), /iPad/i.test(this.userAgent) ? this.iPad = !0 : /iPhone/i.test(this.userAgent) ? this.iPhone = !0 : /Android/i.test(this.userAgent) && (this.android = !0), /msie/i.test(this.userAgent) ? this.msie = !0 : /Chrome/i.test(this.userAgent) ? this.chrome = !0 : /Safari/i.test(this.userAgent) ? this.safari = !0 : /Firefox/i.test(this.userAgent) && (this.firefox = !0); for (var a in $.browser) this[a] = $.browser[a] } }, rootUrl: "/", checkUrl: function (a) { return a.replace(/~\//ig, $jm.rootUrl) }, msgType: { log: 0, error: 1, info: 2, warn: 3 }, out: function (a, b) { this.debug && window.console && (window.console.log && b == $jm.msgType.log ? window.console.log(a) : window.console.error && b == $jm.msgType.error ? window.console.error(a) : window.console.warn && b == $jm.msgType.warn ? window.console.warn(a) : window.console.info && window.console.info(a)) }, isNull: function (a) { return a == null || typeof a == "undefined" }, __urlParams: null, getParam: function (a) { if (this.isNull(b)) { var b = {}, c = window.location.href.indexOf("?"); if (c > 0) { var d = window.location.href.substring(c + 1), e = d.split("&"), f = e.length; for (var g = 0; g < f; g++) { var h = e[g].split("="); b[h[0]] = decodeURI(h[1]) } } } return b[a] }, getOffset: function (a) { a = $(a)[0]; var b = y = 0; do b += a.offsetLeft, y += a.offsetTop; while (a = a.offsetParent); return { left: b, top: y} }, getMouseLocation: function (a, b) { return b || (b = $(document.body)), { x: a.clientX - b.offset().left, y: a.clientY - b.offset().top} }, parseDate: function (a) { if (typeof a == "string") { a = a.replace("/Date(", "").replace(")/", ""); var b = a.indexOf("+"), c = a.indexOf("-"); return b > 0 ? a = a.substring(0, b) : c > 0 && (a = a.substring(0, c)), new Date(parseInt(a, 10)) } }, element: { type: function (a) { a && (a = $(a)); if (a.length > 0) { a = a.get(0); switch (a) { case window: return "window"; case document: return "document"; default: return a.tagName.toLowerCase() } } } } }; $jm.browser._init(), $jm.contain = function (a, b) { if (a) for (var c in a) if (a[c] == b) return !0; return !1 }, $jm.menu = function (a) { this._target = a.target, this._menu = $('<div class="jm_menu"></div>'), this.__body = $("<ul></ul>"), this.__body.appendTo(this._menu), this.id, this.items = {}, this.itemCount = function () { var a = 0; for (var b in this.items) a++; return a }, this.index = 0, this.__itemIndex = 0; var b = null, c = null; this.IContextMenuHander = null; var d = a.target || $(document), e = function () { return !1 }; this.zIndex = function (a) { if (!$jm.isNull(a)) this._menu.css("z-index", a); else return this._menu.css("z-index") }, this.show = function (a, c) { b = function (b) { a && a.hide() }, $(document).unbind("mouseup", b), $(document).bind("mouseup", b); var d = $jm.getMouseLocation(c, a._target), e = $jm.getOffset(a._target), f = a._menu.width(); d.x >= f && c.offsetX > $(window.document).width() - f && (d.x = d.x - f), a._menu.css("left", d.x), a._menu.css("top", d.y), a._menu.show(200) }, this.hide = function () { d.unbind("mouseup", b), this._menu.hide(200) }; var f = function (a, b) { if (a) if (b) $jm.cache.set("jm_menu_" + a, b); else return $jm.cache.get("jm_menu_" + a) }, g = function (a) { if (!$jm.isNull(a)) $jm.cache.set("jm_menu___index", a); else return a = $jm.cache.get("jm_menu___index"), a = Number(a) > 0 ? a : 0, a }; return this.addItem = function (a) { var b = f(this.id); this.__itemIndex++; var c = "jm_menuitem_" + this.index + "_" + this.__itemIndex, d = $('<li jm_menuitem="' + c + '" jm_menuid="' + this.id + '">' + a.text + "</li>"); a.disabled && d.attr("disabled", "disabled"), $jm.isNull(a.tag) || d.attr("tag", a.tag), this.items[c] = a, d.bind("mousedown", function (a) { a.stopPropagation(); var b = $(this).attr("jm_menuid"), c = f(b), d = $(this).attr("jm_menuitem"), e = c.items[d]; if (e.disabled == !0) return; return e && e.click && e.click(), c && c.hide(), !1 }), d.appendTo(this.__body) }, this.init = function () { this.index = g() + 1, g(this.index), d.bind("contextmenu", e); var b = a.button; if ($jm.isNull(b) || Number(b) < 0) b = 2; var c = function (a) { if (a.button == b || b == 0 && a.button == 1) { $(document).bind("contextmenu", e); var c = $(a.srcElement || a.target), d = c.attr("jm_menuid"), g = f(d); g && (g.show(g, a), a.stopPropagation()) } }; this._target.unbind("mouseup", c), this._target.bind("mouseup", c), this.id = "jm_menu_id_" + this.index, this._target.attr("jm_menuid", this.id); if (this.items) for (var h in a.items) this.addItem(a.items[h]); f(this.id, this), this._menu.appendTo(this._target) }, this.init(), this }, $.fn.menu = function (a) { var a = $.extend({ target: $(this) }, a); return new $jm.menu(a) }, $jm.paging = function (a) { this.showCount = a.showCount || 6, this._pagingBody = $('<div class="jm_paging"></div>'), this.parent = typeof a.parent == "string" ? $("#" + a.parent) : a.parent, this._pageClick = function (b) { a.change && (b || (b = $(this).attr("jm_paging_index")), a.change(b)) }, this._turnKeypress = function (b) { var c = b.keyCode ? b.keyCode : b.which; if (c == 13) a.change && $.trim(this.value) != "" && a.change(this.value); else if (c <= 57 && c >= 48 || c == 8 || c == 9 || c == 0) return !0; return !1 }, this._createPages = function (a, b) { var c = []; c.push(1), b > 1 && c.push(2); var d = Math.floor(this.showCount / 2), e = a - d, f = a + d; e < 0 && (f = f - e), f > b && (f = b); for (var g = e; g <= f; g++) !$jm.contain(c, g) && g > 0 && c.push(g); var h = b - 1; return h > 1 && !$jm.contain(c, h) && c.push(h), b > 1 && !$jm.contain(c, b) && c.push(b), c }, this.render = function (b) { this._pagingBody.html(""); var c = parseInt(b.index) || 1, d = parseInt(b.count) || 1; if (d <= 1) return this._pagingBody; var e = a.pretext || "\u4e0a\u4e00\u9875", f = a.nexttext || "\u4e0b\u4e00\u9875", g = a.turntext || "\u8f6c\u5230", h = this._createPages(c, d), i = c > 1 ? c - 1 : 0; if (i > 0) { var j = $('<a href="javascript:;" jm_paging_index="' + i + '">' + e + "</a>"); j.bind("click", function () { if (a.change) { var b = $(this).attr("jm_paging_index"); a.change(b) } }), j.appendTo(this._pagingBody) } var k = 0; for (var l = 0; l < h.length; l++) { var m = h[l]; if (m - k > 1) { var n = $("<span>&nbsp;...&nbsp;</span>"); n.appendTo(this._pagingBody) } var o = $('<a href="javascript:;" jm_paging_index="' + m + '">' + m + "</a>"); m == c ? o.addClass("jm_curPage") : o.bind("click", function () { if (a.change) { var b = $(this).attr("jm_paging_index"); a.change(b) } }), o.appendTo(this._pagingBody), k = m } var p = c < d ? c + 1 : 0; if (p > 0) { var q = $('<a href="javascript:;" jm_paging_index="' + p + '">' + f + "</a>"); q.bind("click", function () { if (a.change) { var b = $(this).attr("jm_paging_index"); a.change(b) } }), q.appendTo(this._pagingBody) } if (d > 1) { var r = $('<input type="text" name="jm_PagerTxt" value="' + c + '" />'); r.bind("keypress", this._turnKeypress), r.appendTo(this._pagingBody); var s = $('<a href="javascript:;">OK</a>'); g && s.text(g), s.bind("click", function () { if (a.change) { var c = r.val(); c > b.count ? c = b.count : c < 1 && (c = 1), r.val(c), a.change(c) } }), s.appendTo(this._pagingBody) } return this.parent ? this._pagingBody.appendTo(this.parent) : this._pagingBody.appendTo("body"), this } }, $.fn.paging = function (a) { var b = $(this).attr("id"); a = $.extend({ parent: $(this) }, a); var c = $jm.cache.set("jm.paging." + b, $jm.cache.get("jm.paging." + b) || new $jm.paging(a)); return c.render(a), c }, $jm.table = function (a) { this.id = a.id; var b = $jm.table.createTable(a.header, a.className); this.rows = [], this.insertRow = function (a) { a && this.rows.push(a) }, this.render = function () { for (var a in this.rows) { var c = this.rows[a], d = document.createElement("tr"); a % 2 == 0 && (d.className = "even"), c.id && (d.id = c.id); if (c && c.length > 0) for (var a in c) { var e = document.createElement("td"); e.innerHTML = c[a], d.appendChild(e) } b.appendChild(d) } return b }; if (a.parent) { var c = document.getElementById(a.parent); c && c.appendChild(b) } }, $jm.table.createTable = function (a, b) { var c = document.createElement("table"); c.className = b || "jm-table"; if (a && a.length > 0) { var d = c.createTHead(); for (var e in a) { var f = document.createElement("th"); f.innerHTML = a[e], d.appendChild(f) } } return c }, $jm || ($jm = {}), $jm.template = function (a, b) { var c = /\W/.test(a) ? new Function("obj", "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('" + a.replace(/[\r\t\n]/g, " ").split("<#").join("\t").replace(/((^|#>)[^\t]*)'/g, "$1\r").replace(/\t=(.*?)#>/g, "',$1,'").split("\t").join("');").split("#>").join("p.push('").split("\r").join("\\'") + "');}return p.join('');") : $jm.cache.set($jm.cache.get(a)) || $jm.template(document.getElementById(a).innerHTML); return b ? c(b) : c }, $.fn.template = function (a, b) { $(this).html($jm.template(a, b)) }, $jm.center = function (a, b) { a = $(a), b || (b = $(window)); var c = b.width(), d = b.height(), e = a.height(), f = a.width(), g = (d - e) / 2 + b.scrollTop(), h = (c - f) / 2; a.css({ top: g > 0 ? g : 0, left: h > 0 ? h : 0 }) }, $jm.winSize = function () { var a = $(window), b = $(window.document.body), c = { w: Math.max(a.width(), b.width()), h: Math.max(a.height(), b.height()) }; return c }, $jm.fullWin = function (a, b, c, d) { b || (b = window), b = $(b), a = $(a), c || (c = 0), d || (d = 0), a.width(b.width() + c), a.height(b.height() + d) }, $jm.getWinById = function (a) { if (!a) return; var b = $jm.cache.get("jm_win_container"); if (b) { var c = b.length; for (var d = 0; d < c; d++) if (b[d].id() == a) return b[d] } }, $jm.getWinByTitle = function (a) { if (!a) return; var b = $jm.cache.get("jm_win_container"); if (b) { var c = b.length; for (var d = 0; d < c; d++) if (b[d].title == a) return b[d] } }, $jm._removewin = function (a) { var b = $jm.cache.get("jm_win_container"); b && (b = $.grep(b, function (b, c) { return b.id() != a }), $jm.cache.set("jm_win_container", b)) }, $jm.closeWinById = function (a) { var b = $jm.getWinById(a); if (!b) return; b.close() }, $jm.get_top_win = function () { var a, b = $jm.cache.get("jm_win_container"); if (b) { var c = b.length; for (var d = 0; d < c; d++) { if (b[d].winState == $jm.winState.min) continue; if (!a || b[d].zindex() > a.zindex()) a = b[d] } } return a }, $jm.winState = { normal: 0, min: 1, max: 2 }, $jm.win = function (a) { if (!a) return; var b = function (a) { if (a) $jm.cache.set("jm_win_index", a); else return $jm.cache.get("jm_win_index") || 0 }; this.Index = b() + 1, b(this.Index), this._body = a.body ? typeof a.body == "object" ? a.body : $("#" + a.body) : "", this.jmwin = !0; var c = a.headheight || 22, d = a.height || 300, e = a.width || 420, f = a.position || "auto", g = f == "left" ? 0 : a.left || "25%", h = f == "top" ? 0 : a.top || 80, i = a.style || "", j = a.title || a.name || "", k = a.id || "jm_win_" + this.Index; this.params = a, this.params.bounds ? (this.params.bounds.top != !1 && (this.params.bounds.top = !0), this.params.bounds.right != !1 && (this.params.bounds.right = !0), this.params.bounds.bottom != !1 && (this.params.bounds.bottom = !0), this.params.bounds.left != !1 && (this.params.bounds.left = !0)) : this.params.bounds = { top: !0, right: !0, bottom: !0, left: !0 }, this.id = function () { return k }, this.modal = a.modal, this.__oldState = this.winState = $jm.isNull(a.state) ? $jm.winState.normal : a.state, this.resizeable = a.resizeable != !1, this.canMax = a.canMax != !1, this.canMin = a.canMin != !1, this.closeCallback = a.closeCallback, this.focusCallback = a.focusCallback, this.subCallback = a.subCallback, this.content = a.content || "", this.winBody = $('<div class="jm_win_body"></div>'), this.winHead = $('<div class="jm_win_head" jm_winid="' + this.id() + '"></div>'), this.ico = this.params.ico ? $('<img src="' + this.params.ico + '" class="jm_win_ico"/>') : $('<div class="jm_win_ico"/>'), this.ico.appendTo(this.winHead), this.winTitle = $('<span class="jm_win_title" jm_winid="' + this.id() + '"></span>'), this.winBottom = $('<div class="jm_win_bottom" jm_winid="' + this.id() + '"></div>'), a.iframe && (this.bodyModel = $('<div class="jm_win_body_model" jm_winid="' + this.id() + '"></div>')), this.win = $('<div class="jm_win" id="' + this.id() + '"></div>'), this.bodyParent = null, this.parent = a.parent ? typeof a.parent == "string" ? $((a.parent[0] == "#" ? "" : "#") + a.parent) : $(a.parent) : $(document.body), this.modal && (this.fullDiv = $('<div class="jm_win_full_div"></div>')), this._zindex = a.zIndex || 100, this.zindex = function (a) { if (a) this.win.css("z-index", a + ""), this._zindex = a; else return this._zindex }, this.html = function (a) { if (this.winBody) return this.winBody.html(a) }, this.__actived = !1, this.actived = function (a) { if (a == !0 || a == !1) this.__actived = a, this.__showModelDiv(!a); return this.__actived }, this.__showModelDiv = function (a) { this.bodyModel && (a == !0 ? this.bodyModel.show() : this.bodyModel.hide()) }, this.title = function (a) { return $jm.isNull(a) || (j = a, this.winTitle.html(a)), j }, this.width = function (a) { if (!$jm.isNull(a)) this.win.width(a), this.resize(); else return this.win.width() }, this.height = function (b) { if (!$jm.isNull(b)) this.win.height(b), b = this.win.height(), a.button && a.button.length > 0 && (b -= this.winBottom.height()), this.winBody.height(b - c - 6), this.resize(); else return this.win.height() }, this.resize = function () { this.resizeCallback && this.resizeCallback() }, this.left = function (a) { if (!$jm.isNull(a)) this.win.css("left", a); else return this.win.position().left }, this.top = function (a) { if (!$jm.isNull(a)) this.win.css("top", a); else return this.win.position().top }, this.__visible = !1, this.visible = function (a) { return this.__visible && a == !1 ? (this.__visible = !1, this.sub(), this.hide()) : !this.__visible && a == !0 ? (this.win.show(), this.changeState(this.__oldState), this.__visible = !0) : a == !0 && this.winState == $jm.winState.min && (this.changeState(this.__oldState), this.__visible = !0), this.__visible }, this.__initButtons = function (a) { if (!a) return; var b = $('<input type="button" class="' + (a.className ? a.className : "jm_win_button") + '" value="' + a.text + '" />'), c = this; a.click && b.click(function () { a.click.call(c) }), b.appendTo(this.winBottom) }, this.__initBody = function () { i && i != "" && this.winBody.attr("class", i); if (this.title) { this.winHead.css("height", c + "px"), this.title(this.title()), this.winTitle.appendTo(this.winHead); var a = $("<a class='cmdbtn close' onmousedown='javascript:event.stopPropagation();' onclick='javascript:$jm.closeWinById(\"" + this.id() + "\");return false' href='javascript:;'>X</a>"); a.appendTo(this.winHead); if (this.resizeable && this.canMax) { var b = $("<a class='cmdbtn max' onmousedown='javascript:event.stopPropagation();' onclick='javascript:$jm.getWinById(\"" + this.id() + "\").changeState();return false' href='javascript:;'>\u53e3</a>"); b.appendTo(this.winHead) } if (this.canMin) { var d = $('<a class="cmdbtn min" onmousedown="javascript:event.stopPropagation();" onclick="javascript:$jm.getWinById(\'' + this.id() + "').min();return false;\">\u4e00</a>"); d.appendTo(this.winHead) } this.winHead.appendTo(this.win) } this.winBody.appendTo(this.win), this.winBody.html('<div class="jm_wait"></div>'), this.win.css("left", g).css("top", h) }, this.__initBody(), this.loadContent = function () { if (this.params.load) { this.params.load(); return } if (this.content || this.params.folder) this.content != "" && !this.params.folder && this.winBody.html(this.content), a.resizeCallback && (this.resizeCallback = a.resizeCallback); else if (this._body) this.html(""), this.bodyParent = this._body[0].parentElement, this._body.appendTo(this.winBody), this._body.show(); else if (!$jm.isNull(this.params.url)) if (this.params.iframe) { var b = $('<iframe frameborder="0" width="100%" height="100%"></iframe>'); b.attr("src", this.params.url), this.html(""), b.appendTo(this.winBody) } else { var c = this.id(); $jm.load(this.params.url, function (a) { var b = $jm.getWinById(c); b && (b.content = $jm.checkUrl(a), b.winBody.html(b.content)) }) } this.bodyModel && this.bodyModel.appendTo(this.winBody) }, this.__winmousedown = function (a) { var b = $jm.getWinById(this.id || a.id); b && b.focus() }, this.__headdblclick = function () { var a = $(this).attr("jm_winid"), b = $jm.getWinById(a); b && b.changeState() }, this.show = function (b) { if (this.params.loading && !this.params.loading(this.id())) return !1; if (this.visible()) { this.focus(); return } this.modal && this.fullDiv && (this.fullDiv.appendTo(this.parent), this.fullDiv.resize.call(this)), this.win.appendTo(this.parent); if (a.button && a.button.length > 0) { this.winBottom.html(""); for (var c in a.button) this.__initButtons(a.button[c]); this.winBottom.appendTo(this.win) } this.left(g), this.top(h), this.width(e), this.height(d), a.position == "center" && $jm.center(this.win, this.parent), this.saveState(), this.win.unbind("mousedown", this.__winmousedown), this.win.bind("mousedown", this.__winmousedown); var f = new $jm.objMove; f.Register(this); if (this.resizeable) { var i = new $jm.objResize; i.Register(this), this.canMax && (this.winHead.unbind("dblclick", this.__headdblclick), this.winHead.bind("dblclick", this.__headdblclick)) } else this.win.css("cursor", "default"); if (this.title && $jm.menu) { var j = [{ text: "\u6700\u5927\u5316", tag: this.id(), disabled: !this.resizeable || !this.canMax, click: function () { var a = $(this).attr("tag"), b = $jm.getWinById(a); b && b.max() } }, { text: "\u6700\u5c0f\u5316", disabled: !this.canMin, tag: this.id(), click: function () { var a = $(this).attr("tag"), b = $jm.getWinById(a); b && b.min() } }, { text: "\u5173\u95ed", tag: this.id(), click: function () { var a = $(this).attr("tag"); $jm.closeWinById(a) } }]; this.winHead.menu({ items: j }), this.winTitle.menu({ items: j }), this.ico.menu({ items: j }) } this.zindex(this.zindex()), this.focus(), this.__visible = !0, this.loadContent(), b && b(), this.winState == $jm.winState.max && setTimeout('var win = $jm.getWinById("' + this.id() + '");if (win)win.max();', 500) }, this.changeState = function (a) { a == $jm.winState.normal || $jm.isNull(a) && this.winState == $jm.winState.max ? this.normal() : a == $jm.winState.max || $jm.isNull(a) && this.winState == $jm.winState.normal ? this.max() : a == $jm.winState.min && this.min() }, this.hide = function (a) { this.win.hide(a) }, this.saveState = function () { if (this.winState == $jm.winState.min) return; this.winState != $jm.winState.max && (this.__oldSize = { w: this.width(), h: this.height() }, this.__oldPosition = { x: this.left(), y: this.top() }), this.__oldState = this.winState }, this.min = function () { this.saveState(); var a = this.id(); this.win.animate({ left: 0, top: 0, width: 0, height: 0 }, 500, function () { var b = $jm.getWinById(a); b.top(-1e3), b.sub(); var c = $jm.get_top_win(); c && c.focus() }), this.winState = $jm.winState.min }, this.max = function () { if (!this.resizeable) return; this.saveState(), this.winState = $jm.winState.max; var a = this.parent.width(), b = (this.parent.get(0) == window.document.body ? $(window).height() : this.parent.height()) - 10; this.left(0), this.top(0), this.width(a), this.height(b) }, this.normal = function () { this.winState = $jm.winState.normal, this.width(this.__oldSize.w), this.height(this.__oldSize.h), this.left(this.__oldPosition.x), this.top(this.__oldPosition.y) }, this.focus = function () { if (this.actived() == !0) return; this.actived(!0); var a = $jm.get_top_win(); if (a && a.id() != this.id()) { var b = a.zindex(); this.zindex() <= b && (this.modal ? (this.fullDiv.css("z-index", b + 1), this.zindex(b + 2)) : this.zindex(b + 1)), a.sub() } this.modal && this.fullDiv.css("z-index", this.zindex() - 1), this.win.removeClass("jm_win_sub"), this.focusCallback && this.focusCallback(this.params.handle), this.visible(!0) }, this.sub = function () { if (this.actived() == !1) return; this.win.addClass("jm_win_sub"), this.actived(!1), this.subCallback && this.subCallback(this.params.handle) }, this.close = function (a) { if (this.params.closing && this.params.closing() == !1) return !1; this.bodyParent && (this._body.hide(), this._body.appendTo(this.bodyParent), this.bodyParent = null), this.fullDiv && this.fullDiv.remove(), this.win.remove(), $jm._removewin(this.id()); var b = $jm.get_top_win(); b && b.focus(), this.__visible = !1, this.actived(!1), this.closeCallback && this.closeCallback(this.params.handle), a && a(this.params.handle) }, this.__oldSize = { w: this.width(), h: this.height() }, this.__oldPosition = { x: this.left(), y: this.top() }; if (this.fullDiv) { this.fullDiv.resize = function () { var a = $jm.winSize(); this.fullDiv.width(a.w), this.fullDiv.height(a.h) }; var l = this.id(); $(window).resize(function () { var a = $jm.getWinById(l); a && a.fullDiv && a.fullDiv.resize.call(a) }) } var m = $jm.cache.get("jm_win_container"); return m || (m = [], $jm.cache.set("jm_win_container", m)), m.push(this), this }, $jm.objMove = function () { var a, b = !1, c, d, e = function (e) { (e.button == 0 || e.button == 1) && a && a.winState != $jm.winState.max && (a.__showModelDiv(!0), e = e || window.event, b = !0, c = { x: a.win.position().left, y: a.win.position().top }, d = $jm.getMouseLocation(e), $(document).unbind("mousemove", f), $(document).bind("mousemove", f), $(document).unbind("mouseup", g), $(document).bind("mouseup", g), e.preventDefault ? e.preventDefault() : e.returnValue = !1) }, f = function (e) { if (b) { e = e || window.event; var f = $jm.getMouseLocation(e); c.x = c.x + (f.x - d.x), c.y = c.y + (f.y - d.y), d = f, a.params.bounds.left && c.x < 1 && (c.x = 1); if (a.params.bounds.right) { var g; if ($jm.element.type(a.parent) == "body" || $jm.element.type(a.parent) == "window" || $jm.element.type(a.parent) == "document") { var h = $jm.winSize(); g = h.w - a.width() - 10 } else g = a.parent.width() - a.width() - 10; c.x > g && (c.x = g) } a.params.bounds.top && c.y < 1 && (c.y = 1); if (a.params.bounds.bottom) { var i; if ($jm.element.type(a.parent) == "body" || $jm.element.type(a.parent) == "window" || $jm.element.type(a.parent) == "document") { var h = $jm.winSize(); i = h.h - a.height() - 10 } else i = a.parent.height() - a.height() - 10; c.y > i && (c.y = i) } a.win.css("left", c.x + "px"), a.win.css("top", c.y + "px") } }, g = function (a) { b && (a = a || window.event, h(), b = !1) }, h = function () { a && ($(document).unbind("mousemove", f), $(document).unbind("mouseup", g), a.__showModelDiv(!1)) }; this.Register = function (b) { a = b, a.winHead.unbind("mousedown", e), a.winHead.bind("mousedown", e) } }, $jm.objResize = function () { var a, b = 0, c, d, e = 6, f = function (f) { if (a) { f = f || window.event, c = { w: a.width(), h: a.height() }, d = $jm.getMouseLocation(f); var i = 0; a.win.offset().top + c.h < d.y + e && (b = 2), a.win.offset().left + c.w < d.x + e && (i = 1); if (b == 2 && i == 1) b = 3, $(this).css("cursor", "se-resize"); else if (i == 1) b = i, $(this).css("cursor", "e-resize"); else if (b == 2) $(this).css("cursor", "s-resize"); else { $(this).css("cursor", "default"); return } a.__showModelDiv(!0), $(document).unbind("mousemove", g), $(document).bind("mousemove", g), $(document).unbind("mouseup", h), $(document).bind("mouseup", h), f.preventDefault ? f.preventDefault() : f.returnValue = !1 } }, g = function (e) { if (b != 0) { e = e || window.event; var f = $jm.getMouseLocation(e); c.w = c.w + (f.x - d.x), c.h = c.h + (f.y - d.y), d = f, (b == 1 || b == 3) && a.width(c.w), (b == 2 || b == 3) && a.height(c.h), e.preventDefault ? e.preventDefault() : e.returnValue = !1 } }, h = function (c) { b != 0 && (c = c || window.event, i(), b = 0, a.__showModelDiv(!1)) }, i = function () { a && (a.win.css("cursor", "default"), $(document).unbind("mousemove", g), $(document).unbind("mouseup", h)) }; this.Register = function (b) { a = b, a.win.unbind("mousedown", f), a.win.bind("mousedown", f) } }, $jm.buttons = { OK: 1, YesOrNo: 2 }, $jm.msgbox = function (a) { var b = a.content, c = a.title || b, d = [], e; a.button == $jm.buttons.YesOrNo ? (d.push({ text: a.yestext || "\u662f", click: function () { if (a.yes && !1 === a.yes()) return !1; this.close() } }), d.push({ text: a.notext || "\u5426", click: function () { if (a.no && !1 === a.no()) return !1; this.close() } })) : d.push({ text: a.oktext || "\u786e\u5b9a", click: function () { if (a.ok && !1 === a.ok()) return !1; this.close() } }), e = new $jm.win({ title: c, modal: !0, content: b, button: d, canMax: !1, canMin: !1, position: "top" }), this.show = function () { return e.show(), e } }, $.fn.window = function (a) { var b = $(this).attr("id"), c = $jm.getWinById(b); if (c) return c; var a = $.extend({ id: b, body: this }, a); return new $jm.win(a) }